symfony:
  build: symfony/
  links:
    - redis
    - mysql
    - elasticsearch
  volumes:
    - ./symfony/code:/var/www

nginx:
  build: nginx/
  ports:
    - 8080:80
  links:
    - fpm
  volumes_from:
    - symfony
  environment:
    <APP_SERVER_NAME>: dev-machine

fpm:
  build: php-fpm/
  links:
    - mysql:mysql
    - redis:redis
    - elasticsearch:elasticsearch
  volumes_from:
    - symfony
  environment:
    APP_SERVER_NAME: dev-machine

redis:
  image: redis:2.8.13

mysql:
  image: mysql
  environment:
    MYSQL_ROOT_PASSWORD: root
    MYSQL_DATABASE: symfony

elasticsearch:
  image: dockerfile/elasticsearch:latest